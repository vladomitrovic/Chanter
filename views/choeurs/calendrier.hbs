<!DOCTYPE html>

<link href='/calendar/fullcalendar.css' rel='stylesheet' />
<link href='/calendar/fullcalendar.print.css' rel='stylesheet' media='print' />

<script src='/calendar/jquery-1.10.2.js'></script>
<script src='/calendar/jquery-ui.custom.min.js'></script>

<script src='/calendar/fullcalendar.js'></script>
<script src='/calendar/locale/fr-ch.js'></script>
<script src='/calendar/locale/de-ch.js'></script>







<script>

    $(document).ready(function() {
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var eventsDB = JSON.parse(decodeURIComponent("{{{events}}}"));



        var jsEvents = [];

        for(var k in eventsDB) {

            var temp = {title: eventsDB[k].title, start: eventsDB[k].start, end: eventsDB[k].end, className: 'important', allDay: false}

            jsEvents.push(temp);
        }


        console.log(jsEvents);



        /* initialize the calendar
        -----------------------------------------------------------------*/

        var calendar =  $('#calendar').fullCalendar({
            header: {
                left: 'title',
                center: 'agendaDay,agendaWeek,month',
                right: 'prev,next today'
            },
            editable: false,
            firstDay: 1, //  1(Monday) this can be changed to 0(Sunday) for the USA system
            selectable: false,
            defaultView: 'month',

            axisFormat: 'h:mm',
            columnFormat: {
                month: 'ddd',    // Mon
                week: 'ddd d', // Mon 7
                day: 'dddd M/d',  // Monday 9/7
                agendaDay: 'dddd d'
            },
            titleFormat: {
                month: 'MMMM yyyy', // September 2009
                week: "MMMM yyyy", // September 2009
                day: 'MMMM yyyy'                  // Tuesday, Sep 8, 2009
            },
            allDaySlot: false,
            selectHelper: true,
            select: function(start, end, allDay) {
                var title = prompt('Event Title:');
                if (title) {
                    calendar.fullCalendar('renderEvent',
                            {
                                title: title,
                                start: start,
                                end: end,
                                allDay: allDay
                            },
                            true // make the event "stick"
                    );
                }
                calendar.fullCalendar('unselect');
            },

            locale: 'de-ch',

            events: jsEvents


        });



    });

</script>



<div id='wrap' >

    <div id='calendar'></div>

    <div style='clear:both'></div>
</div>

